/*!  RD_TemplatePackage_3 2016-07-12 Build: 3.2.0.1 */
/*!
 *	Some CDC legalese
 * 	Feeds: //www2c.cdc.gov/podcasts/rss.asp
 */
!function(a,b,c,d){function e(b,c){this.element=b,this.options=a.extend({},g,c),this._defaults=g,this._name=f,this.init()}var f="getFeed",g={feedId:0,itemTitle:'<a class="item-title"/>',itemPubdate:'<span class="item-pubdate"/>',itemDescription:'<span class="item-description"/>',maxItems:4,columns:1,listType:"list-bullet",cache:!1,showImage:!0,showTitle:!0,showPubDate:!0,showDescription:!0,showCategory:!0,isFeature:!1,featureText:"Feature of the week: ",feedUrl:"//www2c.cdc.gov/podcasts/feed.asp?feedid="};e.prototype={settings:{column1:0,column2:0,count_items:0,list:"",newItem:"",listContainer:"",a:"",aa:"",d:"",entries:[],regex:/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*\.(?:jpe?g|gif|png|tif?f))(?:\?([^#]*))?(?:#(.*))?/i},init:function(){this.options.columns>2?2:(this.options.columns<1,1),this.settings.column1=this.options.maxItems,2===this.options.columns&&(this.settings.column1=Math.ceil(this.options.maxItems/this.options.columns),this.settings.column2=this.options.maxItems-this.settings.column1),382===this.options.feedId&&(console.log(this.settings.column1),console.log(this.settings.column2)),this.get(this.element,this.options,this.settings)},get:function(b,c,d){var e=this;return"<a "===c.itemTitle.substr(0,3),c.feedId||isNaN(c.feedId-0)||null===c.feedId||""===c.feedId||c.feedId===!1?(a.ajaxSetup({cache:c.cache}),void a.getJSON(c.feedUrl+c.feedId+"&format=json&callback=?",function(a){a.entries.length>0?(e.settings.entries=a.entries,e.output(e,b,c)):console.log("Feed: "+c.feedId+" has no entries")})):(alert("Please set a valid Feed ID on Element: "+a(b).attr("id")),!1)},output:function(a,b,c){c.isFeature?a.getFeatureFeed(a,b,c):1===c.maxItems?a.getSingleFeed(a,b,c):2===c.columns?a.getTwoColumnFeed(a,b,c):a.getOneColumnFeed(a,b,c)},getFeatureFeed:function(b,c,d){var e=b.settings;e.newItem=a("<div/>"),a(c).append(e.newItem),a.each(e.entries,function(a,c){return d.showImage&&b.getEntryImage(c,e),b.getFeatureTitle(c,e,d),!1})},getSingleFeed:function(b,c,d){var e=b.settings;e.newItem=a("<div/>"),a(c).append(e.newItem),a.each(e.entries,function(a,c){return d.showImage&&b.getEntryImage(c,e),d.showTitle&&b.getEntryTitle(c,e,d),d.showPubDate&&b.getEntryDate(c,e,d),!1})},getOneColumnFeed:function(b,c,d){var e=b.settings;e.list=a('<ul class="'+d.listType+'" />'),a(c).append(e.list),a.each(e.entries,function(c,f){e.count_items<d.maxItems&&(e.newItem=a("<li/>"),d.showImage&&b.getEntryImage(f,e),d.showTitle&&b.getEntryTitle(f,e,d),d.showPubDate&&b.getEntryDate(f,e,d),e.list.append(e.newItem),e.count_items+=1)}),log("list: ",e.list)},getTwoColumnFeed:function(b,c,d){var e=b.settings;e.list=a('<ul class="'+d.listType+" double listCol1 />"),e.listContainer=a('<div class="listContainer"/>'),a(c).append(e.listContainer),e.listContainer.append(e.list),a.each(e.entries,function(c,f){e.count_items===e.column1&&(e.list=a("<ul/>"),e.list.addClass(d.listType+" double listCol2 last"),e.listContainer.append(e.list)),e.count_items<d.maxItems&&(e.newItem=a("<li/>"),d.showImage&&b.getEntryImage(f,e),d.showTitle&&b.getEntryTitle(f,e,d),d.showPubDate&&b.getEntryDate(f,e,d),e.list.append(e.newItem),e.count_items+=1)})},getEntryTitle:function(b,c,d){c.a=a(d.itemTitle).html(b.title),c.a.attr("href",b.guid),c.newItem.append(c.a)},getEntryDescription:function(a,b,c){},getEntryLink:function(a,b,c){},getEntryDownloadLink:function(a,b,c){},getEntryDate:function(b,c,d){c.d=new Date,isNaN(Date.parse(b.pubdate))?c.d.setTime(Date.parse(b.pubdate.substr(5,2)+"/"+b.pubdate.substr(8,2)+"/"+b.pubdate.substr(0,4)+" "+b.pubdate.substr(11,5))):c.d.setTime(Date.parse(b.pubdate)),c.newItem.append(a(d.itemPubdate).html(c.d.toLocaleString())),c.newItem.append(a(d.itemDescription).html(b.description))},getEntryImage:function(b,c){if(c.regex.test(b.enclosureurl)){var d=a("<img />").attr("src",b.enclosureurl).attr("alt",b.title);c.divx=a('<div class="cdc-caption item-image">').html(d),c.aaa=a('<a class="item-title" />').html(c.divx),c.aaa.attr("href",b.link),c.newItem.append(c.aaa)}},getFeatureTitle:function(b,c,d){c.a=a(d.itemTitle).html(b.title),c.a.attr("href",b.link),c.aa=a('<span class="item-title" />').html(d.featureText),c.aa.append(c.a),c.newItem.append(c.aa)}},a.fn.getFeed=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document);